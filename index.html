<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>A6 Dashboard</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üéì</text></svg>">
    <style>
        :root { 
            --primary: #003366; --accent: #e74c3c; --bg: #f0f2f5; --text: #333;
            --sidebar-text: white; --card-bg: white; --border: #ddd;
            --slot-time: #555; --online-bg: #e8f4fd; --highlight: #f1c40f;
            --green: #27ae60;
            --lab-red: #c0392b; 
            --lec-bg: #ebf5fb;
            --assign-date-color: #003366;
        }

        [data-theme="dark"] {
            --bg: #121212; --text: #e0e0e0; --card-bg: #1e1e1e;
            --border: #333; --slot-time: #bbb; --online-bg: #1a2633;
            --lec-bg: #162a3a;
            --assign-date-color: #5dade2; 
        }

        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); margin: 0; display: flex; transition: all 0.3s; }
        
        .sidebar { width: 280px; background: var(--primary); color: var(--sidebar-text); height: 100vh; padding: 20px; position: fixed; overflow-y: auto; box-sizing: border-box; }
        .sidebar h2 { border-bottom: 2px solid #3498db; padding-bottom: 10px; font-size: 1.2em; }
        .course-list { list-style: none; padding: 0; }
        .course-list li { margin: 15px 0; background: rgba(255,255,255,0.1); padding: 10px; border-radius: 5px; }
        .course-link { color: #5dade2; text-decoration: none; font-size: 0.9em; display: block; margin-top: 5px; }

        .main { margin-left: 280px; padding: 40px; width: 100%; box-sizing: border-box; }
        
        .status-bar { 
            background: var(--card-bg); padding: 20px; border-radius: 8px; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.1); margin-bottom: 25px;
            display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 20px;
        }
        .status-item { border-left: 4px solid var(--primary); padding-left: 15px; }
        .status-item span { display: block; font-size: 0.75em; color: var(--slot-time); text-transform: uppercase; }
        .status-item strong { font-size: 1.1em; display: block; margin-top: 4px; }
        .countdown { color: var(--accent); font-weight: bold; font-size: 0.9em; }

        .header-flex { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .timetable { width: 100%; border-collapse: collapse; background: var(--card-bg); table-layout: fixed; box-shadow: 0 10px 25px rgba(0,0,0,0.05); margin-bottom: 40px;}
        th { background: var(--primary); color: white; padding: 15px; }
        
        .current-day-col { background: rgba(241, 196, 15, 0.1) !important; }
        th.current-day-header { background: #004d99 !important; border-bottom: 4px solid var(--highlight) !important; }

        td { border: 1px solid var(--border); padding: 10px; vertical-align: top; height: 120px; transition: background 0.3s; }
        
        /* SLOT STYLING */
        .slot { font-size: 0.85em; padding: 8px; border-radius: 4px; margin-bottom: 10px; border-left: 4px solid #3498db; background: rgba(0,0,0,0.02); }
        
        /* Cviƒçenia: Dark Red Border & Bold Name */
        .type-cvicenie { border-left-color: var(--lab-red) !important; font-weight: bold; }
        
        /* Predn√°≈°ky: Light background & Normal weight */
        .type-prednaska { border-left-color: #e07c2a !important; background: var(--lec-bg) !important; font-weight: normal !important; }
        .type-prednaska strong { font-weight: normal !important; }

        .online { background: var(--online-bg); border-left-color: var(--accent); }
        .time { font-weight: bold; color: var(--slot-time); display: block; margin-bottom: 3px; }
        .join-btn { display: inline-block; background: var(--accent); color: white; padding: 2px 8px; border-radius: 3px; text-decoration: none; font-size: 0.8em; margin-top: 5px; }
        
        .active-now { border: 2px solid var(--highlight) !important; transform: scale(1.02); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .theme-toggle { background: #34495e; color: white; border: none; padding: 8px 15px; border-radius: 20px; cursor: pointer; }

        /* ASSIGNMENTS SECTION */
        .assignments-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; margin-top: 20px; }
        .assign-card { background: var(--card-bg); border: 1px solid var(--border); border-radius: 8px; padding: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
        .assign-subject { font-size: 0.8em; color: var(--slot-time); text-transform: uppercase; }
        .assign-title { font-size: 1.1em; font-weight: bold; margin: 5px 0; }
        .assign-date { font-size: 0.9em; color: var(--assign-date-color); margin-bottom: 15px; display: block; font-weight: 600; }
        .assign-timer { background: rgba(0,0,0,0.05); padding: 8px; border-radius: 4px; text-align: center; font-weight: bold; color: var(--accent); }
        .assign-timer.safe { color: var(--green); }
    </style>
</head>
<body>

<aside class="sidebar">
    <h2>TUKE FEI INF A6</h2>
    <ul class="course-list">
        <li><strong>MAIS</strong><a href="https://mais.tuke.sk" class="course-link" target="_blank">Student MAIS ‚Üí</a>
            <a href="https://https://maisportal.tuke.sk/portal/studijneProgramy.mais" class="course-link" target="_blank">MAIS Portal ‚Üí</a></li>
        <li><strong>Moodle</strong><a href="https://moodle.tuke.sk" class="course-link" target="_blank">TUKE Moodle ‚Üí</a>
            <a href="https://moodle.fei.tuke.sk/" class="course-link" target="_blank">KPI Moodle ‚Üí</a></li>
        <li><strong>PVJC</strong><a href="https://kurzy.kpi.fei.tuke.sk/pvjc/2026/" class="course-link" target="_blank">Open PVJC Site ‚Üí</a></li>
        <li><strong>MAT II</strong><a href="https://kmti.fei.tuke.sk/predmet/matematika-ii" class="course-link" target="_blank">Open MAT II ‚Üí</a>
            <a href="https://tukesk-my.sharepoint.com/personal/jana_fortes_tuke_sk/_layouts/15/onedrive.aspx?id=%2Fpersonal%2Fjana%5Ffortes%5Ftuke%5Fsk%2FDocuments%2F0%5FTUKE%2F1%5FKMTI%2F%5FMatematika%202%2F2026%2FCvicenia%5Fzdielane&ct=1771322784352&or=OWA%2DNT%2DMail&cid=5d6187f8%2D2c62%2D9779%2De9cc%2D4186d786d7f3&ga=1" class="course-link" target="_blank">Onedrive Link ‚Üí</a></li>
        <li><strong>ZSI</strong><a href="https://kurzy.kpi.fei.tuke.sk/zsi/" class="course-link" target="_blank">Open ZSI ‚Üí</a></li>

    </ul>
</aside>

<div class="main">
    <div class="status-bar">
        <div class="status-item"><span>Date & Time</span><strong id="live-clock">--:--:--</strong></div>
        <div class="status-item"><span>Semester Week</span><strong id="sem-week">--</strong></div>
        <div class="status-item"><span>Current Activity</span><strong id="current-task">Free</strong></div>
        <div class="status-item"><span>Coming Up Next</span><strong id="next-task">--</strong><div id="countdown" class="countdown"></div></div>
    </div>

    <div class="header-flex">
        <h1>LS 2025/2026 Timetable</h1>
        <button class="theme-toggle" id="theme-btn">üåô Dark Mode</button>
    </div>
    
    <table class="timetable">
        <thead>
            <tr>
                <th id="day-1">Monday</th><th id="day-2">Tuesday</th><th id="day-3">Wednesday</th><th id="day-4">Thursday</th><th id="day-5">Friday</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td id="col-1">
                    <div class="slot" data-name="Programovanie (Cviƒçenie)" data-start="09:10" data-end="10:40">
                        <span class="time">09:10 - 10:40</span> Programovanie (Cviƒçenie)<br><small>L9-B529</small>
                    </div>
                    <div class="slot" data-name="Fyzika I (Cviƒçenie)" data-start="10:50" data-end="12:20">
                        <span class="time">10:50 - 12:20</span> Fyzika I (Cviƒçenie)<br><small>PK4_AVWS</small>
                    </div>
                    <div class="slot" data-name="ZSI (Cviƒçenie)" data-start="15:10" data-end="16:40">
                        <span class="time">15:10 - 16:40</span> ZSI (Cviƒçenie)<br><small>L9-B529</small>
                    </div>
                </td>
                <td id="col-2">
                    <div class="slot" data-name="Matematika II (Cviƒçenie)" data-start="07:30" data-end="09:00">
                        <span class="time">07:30 - 09:00</span> Matematika II (Cviƒçenie)<br><small>PK6_PC5</small>
                    </div>
                    <div class="slot online" data-name="ZSI (Predn√°≈°ka)" data-start="10:50" data-end="12:20">
                        <span class="time">10:50 - 12:20</span> <strong>ZSI (Predn√°≈°ka)</strong><br>
                        <a href="https://teams.microsoft.com/meet/37993941338936?p=LweZOXqWb4F07xSIIC" class="join-btn" target="_blank">Join</a>
                    </div>
                </td>
                <td id="col-3">
                    <div class="slot online" data-name="Programovanie (Predn√°≈°ka)" data-start="08:15" data-end="09:45">
                        <span class="time">08:15 - 09:45</span> <strong>Programovanie (Predn√°≈°ka)</strong><br>
                        <small>Heslo: prvaci</small><br>
                        <a href="https://events-tuke.webex.com/events-tuke-en/j.php?MTID=m8a87ca24a9f17e19e6f70ab9e596a75b" class="join-btn" target="_blank">Join</a>
                    </div>
                    <div class="slot online" data-name="Matematika II (Predn√°≈°ka)" data-start="09:55" data-end="11:35">
                        <span class="time">09:55 - 11:35</span> <strong>Matematika II (Predn√°≈°ka)</strong><br>
                        <small>Heslo: prvaci</small><br>
                        <a href="https://events-tuke.webex.com/events-tuke-en/j.php?MTID=m8a87ca24a9f17e19e6f70ab9e596a75b" class="join-btn" target="_blank">Join</a>
                    </div>
                    <div class="slot online" data-name="Fyzika I (Predn√°≈°ka)" data-start="12:30" data-end="14:00">
                        <span class="time">12:30 - 14:00</span> <strong>Fyzika I (Predn√°≈°ka)</strong><br>
                        <small>Heslo: 3PQq8kj4tYN</small><br>
                        <a href="https://tuke.webex.com/tuke/k2/j.phpMTID=te715f8292355bbc3a08edef424377012" class="join-btn" target="_blank">Join</a>
                    </div>
                    <div class="slot online" data-name="PPI (Predn√°≈°ka)" data-start="14:15" data-end="15:55">
                        <span class="time">14:15 - 15:55</span> <strong>PPI (Predn√°≈°ka)</strong><br>
                        <a href="https://tuke.webex.com/meet/branislav.mados" class="join-btn">Join</a>
                    </div>
                </td>
                <td id="col-4">
                    <div class="slot" data-name="PPI (Cviƒçenie)" data-start="07:30" data-end="09:00">
                        <span class="time">07:30 - 09:00</span> PPI (Cviƒçenie)<br><small>PK6_PC2</small>
                    </div>
                </td>
                <td id="col-5">
                    <div style="text-align: center; color: #999; margin-top: 20px;">No scheduled events</div>
                </td>
            </tr>
        </tbody>
    </table>

    <h2>Assignments</h2>
    <div class="assignments-grid" id="assignments-container"></div>
</div>

<script>
    // EDIT YOUR DEADLINES HERE
    const assignmentsData = [
        { subject: "Programovanie", task: "Problem Set #1: Top Secret", date: "2026-03-08T23:59" },
        { subject: "Fyzika I", task: "Z√°poƒçtov√° p√≠somka (mo≈æno)", date: "2026-05-04T10:50" },
        { subject: "Z√°klady softv√©rov√©ho in≈æinierstva", task: "Anal√Ωza po≈æiadaciek a konceptu√°lny n√°vrh", date: "2026-03-30T23:59" },
        { subject: "Matematika II", task: "Z√°poƒçtov√° p√≠somka 1", date: "2026-03-31T07:30" },
        { subject: "Princ√≠py poƒç√≠taƒçov√©ho in≈æinierstva", task: "IDK :>", date: "2069-04-20T07:30" }
    ];

    function getMinutes(timeStr) {
        const [h, m] = timeStr.split(':').map(Number);
        return h * 60 + m;
    }

    function updateDashboard() {
        const now = new Date();
        const currentDay = now.getDay(); 
        const currentMins = now.getHours() * 60 + now.getMinutes();
        
        const dateStr = now.toLocaleDateString('sk-SK');
        const timeStr = now.toLocaleTimeString('en-GB');
        document.getElementById('live-clock').innerHTML = `${dateStr}<br>${timeStr}`;

        const semStart = new Date('2026-02-16');
        const semEnd = new Date('2026-05-14');
        const weekNum = Math.ceil((now - semStart) / (1000 * 60 * 60 * 24 * 7));
        document.getElementById('sem-week').innerText = (now >= semStart && now <= semEnd) ? `Week ${weekNum}` : "Holiday";

        document.querySelectorAll('td').forEach(el => el.classList.remove('current-day-col'));
        document.querySelectorAll('th').forEach(el => el.classList.remove('current-day-header'));
        if (currentDay >= 1 && currentDay <= 5) {
            document.getElementById('col-' + currentDay)?.classList.add('current-day-col');
            document.getElementById('day-' + currentDay)?.classList.add('current-day-header');
        }

        let allSlots = [];
        document.querySelectorAll('.slot').forEach(slot => {
            const parentId = slot.closest('td').id; 
            const slotDay = parseInt(parentId.replace('col-', ''));
            const startMins = getMinutes(slot.dataset.start);
            const endMins = getMinutes(slot.dataset.end);
            
            allSlots.push({
                element: slot,
                name: slot.dataset.name,
                day: slotDay,
                start: startMins,
                end: endMins
            });
        });

        const currentWeeklyMins = (currentDay * 1440) + currentMins;
        let activeSlot = null;
        let nextSlot = null;
        let minDiffToNext = Infinity;

        allSlots.forEach(slot => {
            slot.element.classList.remove('active-now', 'type-cvicenie', 'type-prednaska');
            if (slot.name.includes("Cviƒçenie")) slot.element.classList.add('type-cvicenie');
            if (slot.name.includes("Predn√°≈°ka")) slot.element.classList.add('type-prednaska');

            if (slot.day === currentDay && currentMins >= slot.start && currentMins < slot.end) {
                activeSlot = slot;
                slot.element.classList.add('active-now');
            }

            let slotWeeklyMins = (slot.day * 1440) + slot.start;
            if (slotWeeklyMins <= currentWeeklyMins) {
                slotWeeklyMins += (7 * 1440); 
            }

            const diff = slotWeeklyMins - currentWeeklyMins;
            if (diff > 0 && diff < minDiffToNext) {
                minDiffToNext = diff;
                nextSlot = slot;
            }
        });

        // Update Current Activity with Bold Capitalized text
        const currentTaskEl = document.getElementById('current-task');
        if (activeSlot) {
            const minsLeft = activeSlot.end - currentMins;
            currentTaskEl.innerHTML = `${activeSlot.name} <span style='font-size:0.75em; color:var(--accent); display:block; font-weight:bold; text-transform:none;'>Ends in ${minsLeft}m</span>`;
        } else {
            currentTaskEl.innerText = "Free";
        }

        const nextTaskEl = document.getElementById('next-task');
        const countdownEl = document.getElementById('countdown');
        if (nextSlot) {
            nextTaskEl.innerText = nextSlot.name;
            const days = Math.floor(minDiffToNext / 1440);
            const hrs = Math.floor((minDiffToNext % 1440) / 60);
            const mins = Math.floor(minDiffToNext % 60);
            
            let timeString = "";
            if (days > 0) timeString += `${days}d `;
            if (hrs > 0) timeString += `${hrs}h `;
            timeString += `${mins}m`;
            countdownEl.innerText = `Starts in ${timeString}`;
        } else {
            nextTaskEl.innerText = "--";
            countdownEl.innerText = "";
        }

        renderAssignments(now);
    }

    function renderAssignments(now) {
        const container = document.getElementById('assignments-container');
        container.innerHTML = "";
        if (assignmentsData.length === 0) {
            container.innerHTML = "<p>No active assignments! üéâ</p>";
            return;
        }

        assignmentsData.forEach(item => {
            const deadline = new Date(item.date);
            const diff = deadline - now;
            let timer = "Passed";
            let timerClass = "";

            if (diff > 0) {
                const d = Math.floor(diff / (1000 * 60 * 60 * 24));
                const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                timer = `${d}d ${h}h ${m}m`;
                if (d >= 3) timerClass = "safe";
            }

            container.innerHTML += `
                <div class="assign-card">
                    <div class="assign-subject">${item.subject}</div>
                    <div class="assign-title">${item.task}</div>
                    <span class="assign-date">Deadline: ${deadline.toLocaleDateString('sk-SK')} ${deadline.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'})}</span>
                    <div class="assign-timer ${timerClass}">${timer}</div>
                </div>`;
        });
    }

    const btn = document.getElementById('theme-btn');
    btn.addEventListener('click', () => {
        const isDark = document.body.getAttribute('data-theme') === 'dark';
        isDark ? document.body.removeAttribute('data-theme') : document.body.setAttribute('data-theme', 'dark');
        btn.innerText = isDark ? "üåô Dark Mode" : "‚òÄÔ∏è Light Mode";
    });

    setInterval(updateDashboard, 1000);
    updateDashboard();
</script>
</body>
</html>


